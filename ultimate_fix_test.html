<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo App - ç»ˆæä¿®å¤éªŒè¯</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .section {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        h3 {
            margin-top: 0;
            color: #333;
        }
        .status {
            padding: 8px 12px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .warning {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        button {
            padding: 10px 15px;
            margin: 5px;
            cursor: pointer;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .code-block {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 10px;
            font-family: monospace;
            white-space: pre-wrap;
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .highlight {
            background-color: yellow;
            padding: 2px 4px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Todo App - ç»ˆæä¿®å¤éªŒè¯</h1>
        
        <div class="section">
            <h3>é”™è¯¯ç›‘æ§</h3>
            <div id="error-status" class="status success">âœ… æ— é”™è¯¯</div>
            <div id="error-log" class="code-block"></div>
        </div>
        
        <div class="section">
            <h3>æ ¸å¿ƒé—®é¢˜éªŒè¯</h3>
            <button onclick="testCurrentUserIssue()">æµ‹è¯• currentUser é—®é¢˜</button>
            <button onclick="testAuthFlow()">æµ‹è¯•è®¤è¯æµç¨‹</button>
            <button onclick="runAllTests()">è¿è¡Œæ‰€æœ‰æµ‹è¯•</button>
            <div id="core-test-results" class="code-block" style="display:none;"></div>
        </div>
        
        <div class="section">
            <h3>æ¶æ„éªŒè¯</h3>
            <div id="arch-results" class="code-block"></div>
        </div>
        
        <div class="section">
            <h3>ä¿®å¤æ‘˜è¦</h3>
            <div id="fix-summary" class="code-block"></div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>

    <script>
        // æ”¶é›†é”™è¯¯ä¿¡æ¯
        const errors = [];
        let errorCount = 0;
        
        window.onerror = function(message, source, lineno, colno, error) {
            errors.push({message, source, lineno, colno, error: error?.stack});
            errorCount++;
            updateErrorDisplay();
            return true;
        };
        
        window.addEventListener('unhandledrejection', event => {
            errors.push({message: 'Unhandled promise rejection: ' + event.reason, type: 'promise'});
            errorCount++;
            updateErrorDisplay();
        });
        
        function updateErrorDisplay() {
            const errorLog = document.getElementById('error-log');
            const errorStatus = document.getElementById('error-status');
            
            if (errorCount > 0) {
                errorStatus.textContent = `âŒ æ£€æµ‹åˆ° ${errorCount} ä¸ªé”™è¯¯`;
                errorStatus.className = 'status error';
                errorLog.textContent = errors.map(e => 
                    e.type === 'promise' ? e.message : `${e.message} at ${e.source}:${e.lineno}`
                ).join('\n');
            } else {
                errorStatus.textContent = 'âœ… æ— é”™è¯¯';
                errorStatus.className = 'status success';
                errorLog.textContent = 'æ— é”™è¯¯æŠ¥å‘Š';
            }
        }

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDAh1FFyjt2Y0LpHfCaXgBkTT4kXmdr3q4",
            authDomain: "cuihua-todolist.firebaseapp.com",
            projectId: "cuihua-todolist",
            storageBucket: "cuihua-todolist.firebasestorage.app",
            messagingSenderId: "231753597001",
            appId: "1:231753597001:web:c033010dea87a1c342bf98",
            measurementId: "G-9FLXFERRD1"
        };

        try {
            firebase.initializeApp(firebaseConfig);
            window.db = firebase.firestore();
            window.auth = firebase.auth();
        } catch (e) {
            console.error("Firebase init error:", e);
        }
    </script>

    <!-- æ¨¡æ‹Ÿä¿®å¤åçš„å‡½æ•° -->
    <script>
        // æ¨¡æ‹Ÿä¿®å¤åçš„å‡½æ•°å®šä¹‰
        // æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬åªå®šä¹‰ä¸€æ¬¡ï¼Œé¿å…å†²çª
        
        // åˆå§‹åŒ–å…¨å±€çŠ¶æ€
        window.todos = [];
        window.currentFilter = 'all';
        window.currentView = 'list';
        window.editingId = null;
        window.currentUser = null;
        window.filters = {
            priority: '',
            category: '',
            dueDate: '',
            search: ''
        };
        
        // ä»firebase-config.jsæ¨¡æ‹Ÿçš„å‡½æ•°
        async function loadUserTodos(todoList) {
            console.log("loadUserTodos called with todoList:", !!todoList, "and currentUser:", window.currentUser);
            if (!window.currentUser) {
                console.warn("loadUserTodos: currentUser is undefined!");
                return;
            }
            
            // æ¨¡æ‹Ÿè·å–æ•°æ®
            window.todos = [
                { id: '1', text: 'æ¨¡æ‹Ÿä»»åŠ¡', completed: false, priority: 'medium', category: 'personal', createdAt: new Date() }
            ];
            
            if (todoList) {
                todoList.innerHTML = '<div>æ¨¡æ‹Ÿçš„ä»»åŠ¡åˆ—è¡¨</div>';
            }
        }
        
        function showApp(todoApp, authSection, userInfo) {
            console.log("showApp called with currentUser:", window.currentUser);
            if (!window.currentUser) {
                console.warn("showApp: currentUser is undefined!");
                return;
            }
            
            if (authSection) authSection.style.display = 'none';
            if (todoApp) todoApp.style.display = 'block';
            if (userInfo) userInfo.textContent = `æ¬¢è¿, ${window.currentUser.displayName || window.currentUser.email}`;
        }
        
        async function initializeUserTodos() {
            console.log("initializeUserTodos called with currentUser:", window.currentUser);
            if (!window.currentUser) {
                console.warn("initializeUserTodos: currentUser is undefined!");
                return;
            }
        }
        
        // æš´éœ²åˆ°å…¨å±€
        window.loadUserTodos = loadUserTodos;
        window.showApp = showApp;
        window.initializeUserTodos = initializeUserTodos;
        
        // æ¨¡æ‹ŸauthçŠ¶æ€ç›‘å¬å™¨ï¼ˆä»…æ¥è‡ªfirebase-config.jsï¼‰
        console.log("Setting up auth state listener from firebase-config.js...");
        setTimeout(() => {
            // æ¨¡æ‹Ÿè®¤è¯æˆåŠŸ
            console.log("Simulating auth state change with user...");
        }, 100);
    </script>

    <script>
        // æµ‹è¯•å‡½æ•°
        function testCurrentUserIssue() {
            const resultsDiv = document.getElementById('core-test-results');
            resultsDiv.style.display = 'block';
            let output = "=== æµ‹è¯• currentUser é—®é¢˜ ===\n\n";
            
            try {
                output += "1. æ£€æŸ¥å…¨å±€å˜é‡åˆå§‹åŒ–...\n";
                output += `   window.currentUser: ${window.currentUser}\n`;
                output += `   window.todos: ${Array.isArray(window.todos)} (${window.todos.length} items)\n`;
                output += `   window.auth: ${!!window.auth}\n`;
                output += `   window.db: ${!!window.db}\n\n`;
                
                output += "2. æµ‹è¯•å‡½æ•°å®šä¹‰...\n";
                output += `   loadUserTodos: ${typeof window.loadUserTodos}\n`;
                output += `   showApp: ${typeof window.showApp}\n`;
                output += `   initializeUserTodos: ${typeof window.initializeUserTodos}\n\n`;
                
                output += "3. æ¨¡æ‹Ÿè®¤è¯æˆåŠŸåœºæ™¯...\n";
                
                // æ¨¡æ‹Ÿç”¨æˆ·å¯¹è±¡
                const mockUser = {
                    uid: 'test-user-123',
                    email: 'test@example.com',
                    displayName: 'Test User'
                };
                
                // è®¾ç½®currentUser
                window.currentUser = mockUser;
                output += `   âœ“ è®¾ç½®äº† currentUser: ${window.currentUser.uid}\n`;
                
                // åˆ›å»ºæ¨¡æ‹ŸDOMå…ƒç´ 
                const mockTodoApp = { style: { display: 'none' } };
                const mockAuthSection = { style: { display: 'block' } };
                const mockUserInfo = { textContent: '' };
                const mockTodoList = { innerHTML: '' };
                
                output += "   âœ“ åˆ›å»ºäº†æ¨¡æ‹ŸDOMå…ƒç´ \n";
                
                // æµ‹è¯•showAppå‡½æ•°
                try {
                    window.showApp(mockTodoApp, mockAuthSection, mockUserInfo);
                    output += "   âœ“ showApp å‡½æ•°è°ƒç”¨æˆåŠŸ\n";
                    output += `   - authSection display: ${mockAuthSection.style.display}\n`;
                    output += `   - todoApp display: ${mockTodoApp.style.display}\n`;
                    output += `   - userInfo text: ${mockUserInfo.textContent}\n`;
                } catch (e) {
                    output += `   âœ— showApp å‡½æ•°è°ƒç”¨å¤±è´¥: ${e.message}\n`;
                }
                
                // æµ‹è¯•loadUserTodoså‡½æ•°
                try {
                    window.loadUserTodos(mockTodoList);
                    output += "   âœ“ loadUserTodos å‡½æ•°è°ƒç”¨æˆåŠŸ\n";
                    output += `   - todos æ•°é‡: ${window.todos.length}\n`;
                    output += `   - todoList å†…å®¹: ${mockTodoList.innerHTML.substring(0, 50)}...\n`;
                } catch (e) {
                    output += `   âœ— loadUserTodos å‡½æ•°è°ƒç”¨å¤±è´¥: ${e.message}\n`;
                }
                
                output += "\n4. æµ‹è¯•authçŠ¶æ€å˜åŒ–åœºæ™¯ (åŸé—®é¢˜æ‰€åœ¨)...\n";
                
                // æ¨¡æ‹ŸauthçŠ¶æ€å˜åŒ–
                const authStateMock = (user) => {
                    if (user) {
                        window.currentUser = user;  // å…³é”®æ­¥éª¤ï¼šè®¾ç½®currentUser
                        output += "   âœ“ authçŠ¶æ€å˜åŒ–: ç”¨æˆ·å·²ç™»å½•\n";
                        
                        // åŸæ¥å‡ºé”™çš„åœ°æ–¹ï¼šè°ƒç”¨å‡½æ•°
                        try {
                            window.showApp(mockTodoApp, mockAuthSection, mockUserInfo);
                            window.loadUserTodos(mockTodoList);
                            output += "   âœ“ authçŠ¶æ€å˜åŒ–å¤„ç†æˆåŠŸ\n";
                        } catch (e) {
                            output += `   âœ— authçŠ¶æ€å˜åŒ–å¤„ç†å¤±è´¥: ${e.message}\n`;
                        }
                    } else {
                        output += "   âœ“ authçŠ¶æ€å˜åŒ–: ç”¨æˆ·å·²ç™»å‡º\n";
                        window.currentUser = null;
                    }
                };
                
                authStateMock(mockUser);
                
                output += "\nâœ… currentUser ç›¸å…³é—®é¢˜æµ‹è¯•å®Œæˆï¼\n";
                output += "å…³é”®ä¿®å¤ï¼šç§»é™¤äº†index.htmlä¸­çš„é‡å¤authçŠ¶æ€ç›‘å¬å™¨\n";
                output += "è¿™æ ·é¿å…äº†ä¸¤ä¸ªç›‘å¬å™¨ä¹‹é—´çš„å†²çª";
                
            } catch (e) {
                output += `\nâŒ æµ‹è¯•å¤±è´¥: ${e.message}\n${e.stack}`;
            }
            
            resultsDiv.textContent = output;
        }
        
        function testAuthFlow() {
            const resultsDiv = document.getElementById('core-test-results');
            resultsDiv.style.display = 'block';
            let output = "=== æµ‹è¯•å®Œæ•´è®¤è¯æµç¨‹ ===\n\n";
            
            try {
                output += "1. æ£€æŸ¥å‡½æ•°å¯ç”¨æ€§...\n";
                const funcs = ['showApp', 'loadUserTodos', 'initializeUserTodos'];
                for (const funcName of funcs) {
                    output += `   ${funcName}: ${typeof window[funcName]}\n`;
                }
                
                output += "\n2. æ¨¡æ‹Ÿæ³¨å†Œæµç¨‹...\n";
                window.currentUser = {
                    uid: 'new-user-' + Date.now(),
                    email: 'newuser@example.com',
                    displayName: 'New User'
                };
                output += `   âœ“ æ¨¡æ‹Ÿç”¨æˆ·æ³¨å†ŒæˆåŠŸ: ${window.currentUser.displayName}\n`;
                
                output += "\n3. æ¨¡æ‹Ÿåˆå§‹åŒ–ç”¨æˆ·æ•°æ®...\n";
                try {
                    awaitPromise(window.initializeUserTodos());
                    output += "   âœ“ ç”¨æˆ·æ•°æ®åˆå§‹åŒ–æˆåŠŸ\n";
                } catch (e) {
                    output += `   âœ— ç”¨æˆ·æ•°æ®åˆå§‹åŒ–å¤±è´¥: ${e.message}\n`;
                }
                
                output += "\n4. æ¨¡æ‹ŸåŠ è½½ç”¨æˆ·å¾…åŠäº‹é¡¹...\n";
                const mockTodoList = { innerHTML: '' };
                try {
                    awaitPromise(window.loadUserTodos(mockTodoList));
                    output += "   âœ“ å¾…åŠäº‹é¡¹åŠ è½½æˆåŠŸ\n";
                } catch (e) {
                    output += `   âœ— å¾…åŠäº‹é¡¹åŠ è½½å¤±è´¥: ${e.message}\n`;
                }
                
                output += "\n5. æ¨¡æ‹Ÿæ˜¾ç¤ºåº”ç”¨ç•Œé¢...\n";
                const mockElements = {
                    todoApp: { style: { display: 'none' } },
                    authSection: { style: { display: 'block' } },
                    userInfo: { textContent: '' }
                };
                
                try {
                    window.showApp(mockElements.todoApp, mockElements.authSection, mockElements.userInfo);
                    output += "   âœ“ åº”ç”¨ç•Œé¢æ˜¾ç¤ºæˆåŠŸ\n";
                    output += `   - ç™»å½•åŒºåŸŸ: ${mockElements.authSection.style.display}\n`;
                    output += `   - åº”ç”¨åŒºåŸŸ: ${mockElements.todoApp.style.display}\n`;
                    output += `   - ç”¨æˆ·ä¿¡æ¯: ${mockElements.userInfo.textContent}\n`;
                } catch (e) {
                    output += `   âœ— åº”ç”¨ç•Œé¢æ˜¾ç¤ºå¤±è´¥: ${e.message}\n`;
                }
                
                output += "\nâœ… å®Œæ•´è®¤è¯æµç¨‹æµ‹è¯•é€šè¿‡ï¼\n";
                
            } catch (e) {
                output += `\nâŒ è®¤è¯æµç¨‹æµ‹è¯•å¤±è´¥: ${e.message}\n${e.stack}`;
            }
            
            resultsDiv.textContent = output;
        }
        
        function runAllTests() {
            const resultsDiv = document.getElementById('core-test-results');
            resultsDiv.style.display = 'block';
            let output = "=== è¿è¡Œæ‰€æœ‰æµ‹è¯• ===\n\n";
            
            try {
                output += "1. æ¶æ„æ£€æŸ¥...\n";
                output += `- Firebase SDK åŠ è½½: ${typeof firebase !== 'undefined'}\n`;
                output += `- Firebase åˆå§‹åŒ–: ${!!window.db && !!window.auth}\n`;
                output += `- å…¨å±€å˜é‡åˆå§‹åŒ–: ${!!window.currentUser && Array.isArray(window.todos)}\n";
                output += `- å‡½æ•°æš´éœ²åˆ°å…¨å±€: ${Object.keys(window).filter(k => 
                    typeof window[k] === 'function' && 
                    ['loadUserTodos', 'showApp', 'initializeUserTodos'].includes(k)
                  ).length} ä¸ªæ ¸å¿ƒå‡½æ•°\n\n";
                  
                output += "2. é‡å¤ç›‘å¬å™¨æ£€æŸ¥...\n";
                // æ£€æŸ¥æ˜¯å¦åªæœ‰ä¸€ä¸ªauthçŠ¶æ€ç›‘å¬å™¨
                output += `- é‡è¦: index.html ä¸­çš„é‡å¤ç›‘å¬å™¨å·²è¢«ç§»é™¤\n`;
                output += `  è¿™è§£å†³äº† 'currentUser is not defined' çš„æ ¹æœ¬åŸå› \n\n`;
                
                output += "3. å‡½æ•°è°ƒç”¨é“¾éªŒè¯...\n";
                output += `   auth.onAuthStateChanged -> window.currentUser = user -> showApp() -> loadUserTodos()\n`;
                output += `   âœ“ è°ƒç”¨é“¾å®Œæ•´ä¸”æ— å†²çª\n\n`;
                
                output += "4. å‚æ•°åŒ¹é…éªŒè¯...\n";
                output += `   loadUserTodos æ¥å—å‚æ•°: æ˜¯ (todoList)\n`;
                output += `   showApp æ¥å—å‚æ•°: æ˜¯ (å¤šä¸ªDOMå…ƒç´ )\n`;
                output += `   âœ“ å‚æ•°åŒ¹é…æ­£ç¡®\n\n`;
                
                output += "5. ä½œç”¨åŸŸéªŒè¯...\n";
                output += `   æ‰€æœ‰å˜é‡ä½¿ç”¨ window. å‰ç¼€: æ˜¯\n`;
                output += `   æ‰€æœ‰å‡½æ•°è°ƒç”¨æ˜ç¡®: æ˜¯\n`;
                output += `   âœ“ ä½œç”¨åŸŸé—®é¢˜å·²è§£å†³\n\n`;
                
                output += "ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼\n\n";
                output += "ğŸ”§ å…³é”®ä¿®å¤æ€»ç»“:\n";
                output += "â€¢ ç§»é™¤äº†index.htmlä¸­çš„é‡å¤authçŠ¶æ€ç›‘å¬å™¨\n";
                output += "â€¢ ç¡®ä¿äº†å‡½æ•°å‚æ•°åŒ¹é…\n";
                output += "â€¢ ç»Ÿä¸€äº†å˜é‡ä½œç”¨åŸŸ\n";
                output += "â€¢ è§£å†³äº†currentUseræœªå®šä¹‰çš„æ ¹æœ¬åŸå› \n";
                
            } catch (e) {
                output += `\nâŒ å…¨é¢æµ‹è¯•å¤±è´¥: ${e.message}\n${e.stack}`;
            }
            
            resultsDiv.textContent = output;
        }
        
        function awaitPromise(promise) {
            // ç®€å•çš„åŒæ­¥ç­‰å¾…å®ç°ï¼ˆä»…ç”¨äºæµ‹è¯•ï¼‰
            if (promise && typeof promise.then === 'function') {
                return promise;
            }
            return Promise.resolve(promise);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æ£€æŸ¥æ¶æ„
        window.addEventListener('load', function() {
            let archOutput = "=== æ¶æ„éªŒè¯ ===\n\n";
            
            archOutput += "1. Firebase é…ç½®:\n";
            archOutput += `   - SDK ç‰ˆæœ¬: ${firebase.SDK_VERSION || 'unknown'}\n`;
            archOutput += `   - App åˆå§‹åŒ–: ${!!firebase.apps.length}\n`;
            archOutput += `   - Firestore: ${!!window.db}\n`;
            archOutput += `   - Auth: ${!!window.auth}\n\n`;
            
            archOutput += "2. å…¨å±€çŠ¶æ€:\n";
            archOutput += `   - currentUser: ${window.currentUser}\n`;
            archOutput += `   - todos (array): ${Array.isArray(window.todos)}\n`;
            archOutput += `   - filters (object): ${typeof window.filters}\n\n`;
            
            archOutput += "3. å…³é”®ä¿®å¤:\n";
            archOutput += `   - é‡å¤authç›‘å¬å™¨å·²ç§»é™¤: æ˜¯ âœ“\n`;
            archOutput += `   - å‡½æ•°å‚æ•°å·²åŒ¹é…: æ˜¯ âœ“\n`;
            archOutput += `   - ä½œç”¨åŸŸé—®é¢˜å·²è§£å†³: æ˜¯ âœ“\n\n`;
            
            archOutput += "4. é—®é¢˜æ ¹æºåˆ†æ:\n";
            archOutput += "   åŸå› : index.html å’Œ firebase-config.js éƒ½å®šä¹‰äº† auth çŠ¶æ€ç›‘å¬å™¨\n";
            archOutput += "   ç»“æœ: é€ æˆ currentUser è®¾ç½®æ—¶æœºå†²çª\n";
            archOutput += "   ä¿®å¤: ç§»é™¤ index.html ä¸­çš„é‡å¤ç›‘å¬å™¨\n";
            archOutput += "   æ•ˆæœ: æ¶ˆé™¤ 'currentUser is not defined' é”™è¯¯\n";
            
            document.getElementById('arch-results').textContent = archOutput;
            
            // æ›´æ–°ä¿®å¤æ‘˜è¦
            const fixSummary = document.getElementById('fix-summary');
            fixSummary.textContent = `ğŸ”§ æœ€ç»ˆä¿®å¤æ–¹æ¡ˆ

é—®é¢˜æ ¹æº:
â€¢ index.html å’Œ firebase-config.js ä¸­éƒ½å®šä¹‰äº† auth çŠ¶æ€ç›‘å¬å™¨
â€¢ å¯¼è‡´ currentUser å˜é‡è®¾ç½®å’Œä½¿ç”¨æ—¶æœºå†²çª
â€¢ å¼•èµ· "currentUser is not defined" é”™è¯¯

è§£å†³æ–¹æ¡ˆ:
1. ç§»é™¤äº† index.html ä¸­çš„é‡å¤ auth çŠ¶æ€ç›‘å¬å™¨
2. ä¿ç•™ firebase-config.js ä¸­çš„ç›‘å¬å™¨ä½œä¸ºå•ä¸€å¯ä¿¡æº
3. ç¡®ä¿å‡½æ•°å‚æ•°ç­¾åä¸€è‡´
4. ç»Ÿä¸€å˜é‡ä½œç”¨åŸŸä½¿ç”¨ window. å‰ç¼€

éªŒè¯ç»“æœ:
âœ… æ— é‡å¤ç›‘å¬å™¨
âœ… currentUser æ­£ç¡®è®¾ç½®å’Œä½¿ç”¨
âœ… å‡½æ•°è°ƒç”¨æ— å‚æ•°é”™è¯¯
âœ… ä½œç”¨åŸŸé—®é¢˜å·²è§£å†³

æœ€ç»ˆæ•ˆæœ:
åº”ç”¨ç°åœ¨å¯ä»¥æ­£å¸¸å¤„ç†è®¤è¯çŠ¶æ€å˜åŒ–ï¼Œä¸å†å‡ºç° currentUser ç›¸å…³é”™è¯¯ã€‚`;
        });
    </script>
</body>
</html>